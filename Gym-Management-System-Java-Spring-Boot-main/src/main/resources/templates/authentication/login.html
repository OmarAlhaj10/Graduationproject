<!-- <!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>PurelyFit</title>
    <link
      rel="shortcut icon"
      href="../../static/css/book-diet-6215693-5076252.webp"
      type="image/x-icon"
    />
    <meta charset="UTF-8" />
    <link
      th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"
      rel="stylesheet"
    />
    <link th:href="@{/webjars/font-awesome/css/all.css}" rel="stylesheet" />
    <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-..."
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body class="bg-dark text-white d-flex flex-column min-vh-100">
    <nav
      class="navbar bg-dark navbar-dark navbar-extend p-2"
      style="border-bottom: 1px solid #dc3545"
    >
      <div class="container-fluid">
        <a class="navbar-brand fs-4 fw-bold" th:href="@{/}">
          <i class="fa-solid fa-dumbbell mx-2"></i>
          <span style="color: #dc3545">Work Hard, Gain Hard</span>
        </a>
      </div>
    </nav>

    <section class="container-fluid d-flex flex-grow-1 px-0">
      <div class="col">
        <img
          src="https://www.dexeus.com/blog/wp-content/uploads/2019/11/shutterstock_1495916660.jpg"
          class="img-fluid"
          style="object-fit: cover; height: 100%"
        />
      </div>
      <div class="col d-flex align-items-center">
        <div class="container-fluid d-flex flex-column">
          <form
            class="pb-5 border-bottom px-5"
            th:action="@{/login}"
            method="POST"
          >
            <div class="text-center fs-4" th:text="${message}"></div>
            <div
              class="text-center fw-bold mb-4"
              style="font-size: 3rem; color: #ffffff"
            >
              Legends Workout
            </div>

            <div class="form-group form-floating mb-4">
              <input
                type="text"
                class="form-control bg-dark text-white"
                placeholder="Correo"
                name="username"
                id="username"
                required="true"
              />
              <label class="form-label" style="color: #dc3545">Username</label>
            </div>
            <div class="form-group form-floating mb-4">
              <input
                type="password"
                class="form-control bg-dark text-white"
                placeholder="password"
                name="password"
                id="password"
                required="true"
              />
              <label class="form-label" style="color: #dc3545">Password</label>
            </div>
            <div class="form-group text-center">
              <button
                type="submit"
                class="btn btn-primary btn-lg w-25"
                style="
                  border-color: #dc3545;
                  background-color: #343a40;
                  color: #ffffff;
                "
              >
                Login
              </button>
            </div>
          </form>
          <a
            class="mt-4 text-center under"
            th:href="@{/registration}"
            style="color: #ffffff"
            >Don't have an Account?<br />SignUp</a
          >
        </div>
      </div>
    </section>
  </body>
</html> -->

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>PurelyFit</title>
    <link
      rel="shortcut icon"
      href="../../static/css/book-diet-6215693-5076252.webp"
      type="image/x-icon"
    />
    <meta charset="UTF-8" />
    <link
      th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"
      rel="stylesheet"
    />
    <link th:href="@{/webjars/font-awesome/css/all.css}" rel="stylesheet" />
    <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-..."
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body class="bg-dark text-white d-flex flex-column min-vh-100">
    <nav
      class="navbar bg-dark navbar-dark navbar-extend p-2"
      style="border-bottom: 1px solid #dc3545"
    >
      <div class="container-fluid">
        <a class="navbar-brand fs-4 fw-bold" th:href="@{/}">
          <i class="fa-solid fa-dumbbell mx-2"></i>
          <span style="color: #dc3545">Work Hard, Gain Hard</span>
        </a>
      </div>
    </nav>

    <section class="container-fluid d-flex flex-grow-1 px-0">
      <div class="col">
        <img
          src="https://www.dexeus.com/blog/wp-content/uploads/2019/11/shutterstock_1495916660.jpg"
          class="img-fluid"
          style="object-fit: cover; height: 100%"
        />
      </div>
      <div class="col d-flex align-items-center">
        <div class="container-fluid d-flex flex-column">
          <form
            id="loginForm"
            class="pb-5 border-bottom px-5"
            th:action="@{/login}"
            method="POST"
          >
            <div class="text-center fs-4" th:text="${message}"></div>
            <div
              class="text-center fw-bold mb-4"
              style="font-size: 3rem; color: #ffffff"
            >
              Legends Workout
            </div>

            <div class="form-group form-floating mb-4">
              <input
                type="text"
                class="form-control bg-dark text-white"
                placeholder="Correo"
                name="username"
                id="username"
                required="true"
              />
              <label class="form-label" style="color: #dc3545">Username</label>
            </div>
            <div class="form-group form-floating mb-4">
              <input
                type="password"
                class="form-control bg-dark text-white"
                placeholder="password"
                name="password"
                id="password"
                required="true"
              />
              <label class="form-label" style="color: #dc3545">Password</label>
            </div>
            <div class="form-group text-center">
              <button
                type="submit"
                class="btn btn-primary btn-lg w-25"
                style="
                  border-color: #dc3545;
                  background-color: #343a40;
                  color: #ffffff;
                "
              >
                Login
              </button>
            </div>
          </form>
          <a
            class="mt-4 text-center under"
            th:href="@{/registration}"
            style="color: #ffffff"
            >Don't have an Account?<br />SignUp</a
          >
        </div>
      </div>
    </section>

    <!-- Auto-login Script -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Check for URL parameters for auto-login
        const urlParams = new URLSearchParams(window.location.search);
        const auto = urlParams.get('auto');
        const username = urlParams.get('username');
        const password = urlParams.get('password');
        
        if (auto === 'true' && username && password) {
          console.log('Auto-login detected with username:', username);
          
          // Fill the form fields
          const usernameField = document.getElementById('username');
          const passwordField = document.getElementById('password');
          const loginForm = document.getElementById('loginForm');
          
          if (usernameField && passwordField && loginForm) {
            usernameField.value = decodeURIComponent(username);
            passwordField.value = password;
            
            // Add a small delay to ensure form is fully loaded
            setTimeout(() => {
              console.log('Submitting auto-login form...');
              loginForm.submit();
            }, 500);
          } else {
            console.error('Form elements not found');
          }
        }
        
        // Alternative: Listen for postMessage from parent window
        window.addEventListener('message', function(event) {
          // Security check - only accept messages from trusted origins
          // if (event.origin !== 'http://localhost:3000') return; // Uncomment and adjust as needed
          
          if (event.data && event.data.type === 'AUTO_LOGIN') {
            console.log('Auto-login message received:', event.data);
            
            const usernameField = document.getElementById('username');
            const passwordField = document.getElementById('password');
            const loginForm = document.getElementById('loginForm');
            
            if (usernameField && passwordField && loginForm && event.data.username) {
              usernameField.value = event.data.username;
              passwordField.value = event.data.password || '123';
              
              setTimeout(() => {
                console.log('Submitting auto-login form via postMessage...');
                loginForm.submit();
              }, 500);
            }
          }
        });
      });
    </script>
  </body>
</html>